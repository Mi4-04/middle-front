"use strict";(self.webpackChunkmiddle_front=self.webpackChunkmiddle_front||[]).push([[463],{90982:(e,t,l)=>{l.d(t,{Bv:()=>c,D$:()=>u});var a=l(39708);var r=l(39181);var n=l(77969);let s;let i={};let o=(0,a.J1)(s||(s=(e=>e)`
    query GetPlaylists($realId: String) {
  getPlaylists(realId: $realId) {
    playlists {
      id
      name
      imageUrl
    }
  }
}
    `));function u(e){let t={...i,...e};return r.I(o,t)}function c(e){let t={...i,...e};return n._(o,t)}function d(e){let t={...i,...e};return Apollo.useSuspenseQuery(o,t)}},39222:(e,t,l)=>{l.d(t,{$I:()=>o});var a=l(39708);var r=l(39181);let n;let s={};let i=(0,a.J1)(n||(n=(e=>e)`
    query GetTracksForGuest($query: GetTrackListInput!) {
  getTracksForGuest(query: $query) {
    tracks {
      id
      realId
      name
      artist
      imageUrl
      audioUrl
      available
    }
    count
  }
}
    `));function o(e){let t={...s,...e};return r.I(i,t)}function u(e){let t={...s,...e};return Apollo.useLazyQuery(i,t)}function c(e){let t={...s,...e};return Apollo.useSuspenseQuery(i,t)}},96610:(e,t,l)=>{l.d(t,{U:()=>o});var a=l(39708);var r=l(95420);let n;let s={};let i=(0,a.J1)(n||(n=(e=>e)`
    mutation UpdatePlaylist($input: UpdatePlaylistInput!) {
  updatePlaylist(input: $input) {
    status
  }
}
    `));function o(e){let t={...s,...e};return r.n(i,t)}},5328:(e,t,l)=>{l.d(t,{A:()=>es});var a=l(11735);var r=l(97834);var n=l(11641);var s=l(49799);var i=l(47767);var o=l(96540);var u=l(34164);var c=l(47155);var d=l(85738);var v=l(49764);var x=l.n(v);var p=l(93409);var h=l(74848);var g;let f=(0,o.forwardRef)((e,t)=>(0,h.jsx)("svg",{width:7,height:13,viewBox:"0 0 7 13",stroke:"currentColor",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,...e,children:g||(g=(0,h.jsx)("path",{d:"M6.167 12 .833 6.667l5.334-5.334",strokeWidth:1.333,strokeLinecap:"round",strokeLinejoin:"round"}))}));var y;let j=(0,o.forwardRef)((e,t)=>(0,h.jsx)("svg",{width:3,height:14,viewBox:"0 0 3 14",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",ref:t,...e,children:y||(y=(0,h.jsx)("path",{d:"M3 12a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"}))}));let m=(0,d.Ay)(x()).withConfig({componentId:"sc-bqz3c0-0"})(["display:flex;justify-content:center;list-style-type:none;padding:0;margin:2rem 0 0;& a{user-select:none;width:36px;height:36px;background:",";box-shadow:7px 9px 30px ",";border-radius:50%;display:flex;justify-content:center;align-items:center;font-size:14px;cursor:pointer;color:",";margin:0 5px;}& > .selected > a{background:",";color:",";cursor:default;}& > .disabled > a{cursor:default;color:",";}& > :not(.selected):not(.disabled){&:hover > a{color:",";}&:active > a{color:",";}}&.no-arrows > .previous,&.no-arrows > .next{",";}"],p.c,(0,c.B3)(p.GA,.15),p.c3,p.yy,p.c,p.yy,p.yy,p._F,(0,c.Ic)());let A=(0,d.Ay)(f).withConfig({componentId:"sc-bqz3c0-1"})([""]);let b=(0,d.Ay)(f).withConfig({componentId:"sc-bqz3c0-2"})(["transform:rotate(180deg);"]);let k=(0,d.Ay)(j).withConfig({componentId:"sc-bqz3c0-3"})(["transform:rotate(90deg);"]);var w,C,I;function P(e){let{className:t,pagination:l,totalCount:a}=e;let{offset:r,limit:n}=l.value;let s=(0,o.useMemo)(()=>Math.ceil(r/n),[n,r]);let i=(0,o.useMemo)(()=>Math.ceil(a/n),[n,a]);let c=(0,o.useCallback)(({selected:e})=>{l.change(e*n)},[n,l]);return i<2?null:(0,h.jsx)(m,{className:(0,u.A)(t),marginPagesDisplayed:2,pageCount:i,forcePage:s,onPageChange:c,nextLabel:w||(w=(0,h.jsx)(b,{})),previousLabel:C||(C=(0,h.jsx)(A,{})),breakLabel:I||(I=(0,h.jsx)(k,{}))})}var T=l(68125);var q=l(17809);var L=l(52090);var S=l(25239);let $=d.I4.form.withConfig({componentId:"sc-dw44s3-0"})(["margin:0 0 20px 25px;"]);var M,U;function G(e){let{value:t="",onChange:l}=e;let[a,r]=(0,o.useState)(t);let[s,i]=(0,o.useState)(t);return t!==s&&(r(t),i(t)),(0,h.jsx)($,{onSubmit:e=>{e.preventDefault(),null==l||l(a)},onBlur:e=>{e.currentTarget.contains(e.relatedTarget)||r(t)},children:(0,h.jsx)(L.A,{value:a,onChange:e=>r(e.target.value),InputProps:{startAdornment:M||(M=(0,h.jsx)(S.A,{position:"start",children:(0,h.jsx)(T.A,{})})),endAdornment:(0,h.jsx)(n.A,{onClick:()=>{null==l||l("")},children:U||(U=(0,h.jsx)(q.A,{}))})},variant:"standard"})})}var z=l(12794);var B=l(1471);var F=l(18393);var D=l(82241);var Z=l(14073);var _=l(71543);var J=l(67110);var Q=l(22859);var R=l(36694);var W=l(95697);var E=l(36340);var H=l(99682);var N=l(3577);var K=l(18740);var O=l(90982);var V,X;function Y({track:e,onUpdatePlaylist:t}){var l;let[a,{data:r}]=(0,O.Bv)({variables:{realId:e.realId}});let[s,i]=(0,o.useState)(null);let u=async e=>{i(e.currentTarget),await a()};let c=()=>i(null);let d=l=>{t(e,l),c()};let v=null!==(l=null==r?void 0:r.getPlaylists.playlists)&&void 0!==l?l:[];return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(n.A,{disabled:!e.available,onClick:u,children:V||(V=(0,h.jsx)(H.A,{}))}),(0,h.jsx)(N.A,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:s,open:!!s,onClose:c,PaperProps:{style:{maxHeight:216,width:"20ch"}},children:v.map(({id:e,name:t})=>(0,h.jsxs)(K.A,{sx:{dislay:"flex",justifyContent:"space-between"},onClick:()=>d(e),children:[t," ",X||(X=(0,h.jsx)(H.A,{}))]},e))})]})}var ee,et,el,ea;function er(e){let{track:t,index:l,onTogglePlay:a,onAddTrack:r,onDeleteTrack:s}=e;let{id:i,realId:o,name:u,artist:c,available:d,imageUrl:v}=t;let{currentUser:x}=(0,E.A)();let{trackStates:p}=(0,W.A)();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(z.Ay,{alignItems:"flex-start",sx:{background:d?"white":"#b0aeae"},children:[(0,h.jsx)(B.A,{children:(0,h.jsx)(F.A,{alt:u,src:null!=v?v:""})}),(0,h.jsx)(D.A,{primary:u,secondary:(0,h.jsx)(Z.A,{sx:{display:"inline"},component:"span",variant:"body2",color:"text.primary",children:c})}),null!=x&&null!=r?(0,h.jsx)(Y,{track:t,onUpdatePlaylist:r}):null,null!=x&&null!=s&&null!=i?(0,h.jsx)(n.A,{onClick:()=>s(i),children:ee||(ee=(0,h.jsx)(J.A,{}))}):null,(0,h.jsx)(n.A,{disabled:!d,onClick:()=>a(l,o),children:p[o]?et||(et=(0,h.jsx)(Q.A,{})):el||(el=(0,h.jsx)(R.A,{}))})]}),ea||(ea=(0,h.jsx)(_.A,{variant:"inset",component:"li"}))]})}var en;function es(e){let{tracks:t,count:l,pagination:o,search:u,onTogglePlay:c,onAddTrack:d,onDeleteTrack:v}=e;let x=(0,i.Zp)();return(0,h.jsxs)(r.A,{sx:{display:"flex",justifyContent:"center"},children:[(0,h.jsx)(n.A,{sx:{display:"flex",width:20,height:20,alignItems:"flex-start"},onClick:()=>x(-1),children:en||(en=(0,h.jsx)(a.A,{}))}),(0,h.jsxs)(s.A,{sx:{width:"100%",maxWidth:450},children:[(0,h.jsx)(G,{value:u.value,onChange:u.change}),t.map((e,t)=>(0,h.jsx)(er,{track:e,index:t,onTogglePlay:c,onAddTrack:d,onDeleteTrack:v},t)),(0,h.jsx)(P,{pagination:o,totalCount:l})]})]})}},76016:(e,t,l)=>{l.d(t,{A:()=>r});var a=l(96540);function r({defaultOffset:e=0,limit:t}){let[l,r]=(0,a.useState)(e);let n=(0,a.useCallback)(e=>{null==r||r(e)},[]);let s=(0,a.useCallback)(()=>{r(e)},[e]);return(0,a.useMemo)(()=>({value:{offset:l,limit:t},change:n,reset:s}),[n,t,l,s])}},26608:(e,t,l)=>{l.d(t,{A:()=>r});var a=l(96540);function r(e){let{onChange:t}=null!=e?e:{};let[l,r]=(0,a.useState)("");let n=(0,a.useCallback)(e=>{null==t||t(),r(e)},[t]);let s=(0,a.useCallback)(()=>r(""),[]);return{value:l,change:n,reset:s}}},25463:(e,t,l)=>{l.r(t),l.d(t,{default:()=>d});var a=l(95697);var r=l(76016);var n=l(26608);var s=l(5328);var i=l(96610);var o=l(39222);var u=l(74848);var c;function d(){var e;let t=(0,r.A)({limit:50});let l=(0,n.A)({onChange:()=>t.reset()});let{data:d,loading:v}=(0,o.$I)({variables:{query:{pagination:{limit:100,offset:t.value.offset},search:l.value}}});let[x]=(0,i.U)();let{audioRef:p,setTracks:h,setTrackIndex:g,trackIndex:f,trackStates:y,setTrackState:j}=(0,a.A)();let{tracks:m=[],count:A=0}=null!==(e=null==d?void 0:d.getTracksForGuest)&&void 0!==e?e:{};let b=async(e,t)=>{let{available:l,id:a,__typename:r,...n}=e;await x({variables:{input:{track:n,playlistId:t}}})};return v?c||(c=(0,u.jsx)("h1",{children:"Loading..."})):(0,u.jsx)(s.A,{tracks:m,count:A,pagination:t,search:l,onTogglePlay:(e,t)=>{if(f===e){var l,a;y[t]?null==p||null===(l=p.current)||void 0===l||null===(l=l.audio.current)||void 0===l||l.pause():null==p||null===(a=p.current)||void 0===a||null===(a=a.audio.current)||void 0===a||a.play(),j(t,!y[t])}else h(m),g(e),j(t,!0)},onAddTrack:b})}}}]);