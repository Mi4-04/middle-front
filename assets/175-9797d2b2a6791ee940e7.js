"use strict";(self.webpackChunkmiddle_front=self.webpackChunkmiddle_front||[]).push([[175],{90982:(e,t,l)=>{l.d(t,{Bv:()=>c,D$:()=>u});var r=l(39708);var a=l(39181);var n=l(77969);let s;let o={};let i=(0,r.J1)(s||(s=(e=>e)`
    query GetPlaylists($realId: String) {
  getPlaylists(realId: $realId) {
    playlists {
      id
      name
      imageUrl
    }
  }
}
    `));function u(e){let t={...o,...e};return a.I(i,t)}function c(e){let t={...o,...e};return n._(i,t)}function d(e){let t={...o,...e};return Apollo.useSuspenseQuery(i,t)}},39222:(e,t,l)=>{l.d(t,{$I:()=>i});var r=l(39708);var a=l(39181);let n;let s={};let o=(0,r.J1)(n||(n=(e=>e)`
    query GetTracksForGuest($query: GetTrackListInput!) {
  getTracksForGuest(query: $query) {
    tracks {
      id
      realId
      name
      artist
      imageUrl
      audioUrl
      available
    }
    count
  }
}
    `));function i(e){let t={...s,...e};return a.I(o,t)}function u(e){let t={...s,...e};return Apollo.useLazyQuery(o,t)}function c(e){let t={...s,...e};return Apollo.useSuspenseQuery(o,t)}},5328:(e,t,l)=>{l.d(t,{A:()=>es});var r=l(11735);var a=l(97834);var n=l(11641);var s=l(49799);var o=l(47767);var i=l(96540);var u=l(34164);var c=l(47155);var d=l(85738);var v=l(49764);var x=l.n(v);var p=l(93409);var h=l(74848);var g;let f=(0,i.forwardRef)((e,t)=>(0,h.jsx)("svg",{width:7,height:13,viewBox:"0 0 7 13",stroke:"currentColor",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,...e,children:g||(g=(0,h.jsx)("path",{d:"M6.167 12 .833 6.667l5.334-5.334",strokeWidth:1.333,strokeLinecap:"round",strokeLinejoin:"round"}))}));var y;let j=(0,i.forwardRef)((e,t)=>(0,h.jsx)("svg",{width:3,height:14,viewBox:"0 0 3 14",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",ref:t,...e,children:y||(y=(0,h.jsx)("path",{d:"M3 12a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"}))}));let A=(0,d.Ay)(x()).withConfig({componentId:"sc-bqz3c0-0"})(["display:flex;justify-content:center;list-style-type:none;padding:0;margin:2rem 0 0;& a{user-select:none;width:36px;height:36px;background:",";box-shadow:7px 9px 30px ",";border-radius:50%;display:flex;justify-content:center;align-items:center;font-size:14px;cursor:pointer;color:",";margin:0 5px;}& > .selected > a{background:",";color:",";cursor:default;}& > .disabled > a{cursor:default;color:",";}& > :not(.selected):not(.disabled){&:hover > a{color:",";}&:active > a{color:",";}}&.no-arrows > .previous,&.no-arrows > .next{",";}"],p.c,(0,c.B3)(p.GA,.15),p.c3,p.yy,p.c,p.yy,p.yy,p._F,(0,c.Ic)());let m=(0,d.Ay)(f).withConfig({componentId:"sc-bqz3c0-1"})([""]);let b=(0,d.Ay)(f).withConfig({componentId:"sc-bqz3c0-2"})(["transform:rotate(180deg);"]);let k=(0,d.Ay)(j).withConfig({componentId:"sc-bqz3c0-3"})(["transform:rotate(90deg);"]);var w,C,I;function P(e){let{className:t,pagination:l,totalCount:r}=e;let{offset:a,limit:n}=l.value;let s=(0,i.useMemo)(()=>Math.ceil(a/n),[n,a]);let o=(0,i.useMemo)(()=>Math.ceil(r/n),[n,r]);let c=(0,i.useCallback)(({selected:e})=>{l.change(e*n)},[n,l]);return o<2?null:(0,h.jsx)(A,{className:(0,u.A)(t),marginPagesDisplayed:2,pageCount:o,forcePage:s,onPageChange:c,nextLabel:w||(w=(0,h.jsx)(b,{})),previousLabel:C||(C=(0,h.jsx)(m,{})),breakLabel:I||(I=(0,h.jsx)(k,{}))})}var T=l(68125);var q=l(17809);var S=l(52090);var L=l(25239);let M=d.I4.form.withConfig({componentId:"sc-dw44s3-0"})(["margin:0 0 20px 25px;"]);var G,$;function z(e){let{value:t="",onChange:l}=e;let[r,a]=(0,i.useState)(t);let[s,o]=(0,i.useState)(t);return t!==s&&(a(t),o(t)),(0,h.jsx)(M,{onSubmit:e=>{e.preventDefault(),null==l||l(r)},onBlur:e=>{e.currentTarget.contains(e.relatedTarget)||a(t)},children:(0,h.jsx)(S.A,{value:r,onChange:e=>a(e.target.value),InputProps:{startAdornment:G||(G=(0,h.jsx)(L.A,{position:"start",children:(0,h.jsx)(T.A,{})})),endAdornment:(0,h.jsx)(n.A,{onClick:()=>{null==l||l("")},children:$||($=(0,h.jsx)(q.A,{}))})},variant:"standard"})})}var B=l(12794);var F=l(1471);var D=l(18393);var U=l(82241);var Z=l(14073);var _=l(71543);var Q=l(67110);var J=l(22859);var R=l(36694);var W=l(95697);var E=l(37414);var H=l(99682);var N=l(3577);var K=l(18740);var O=l(90982);var V,X;function Y({track:e,onUpdatePlaylist:t}){var l;let[r,{data:a}]=(0,O.Bv)({variables:{realId:e.realId}});let[s,o]=(0,i.useState)(null);let u=async e=>{o(e.currentTarget),await r()};let c=()=>o(null);let d=l=>{t(e,l),c()};let v=null!==(l=null==a?void 0:a.getPlaylists.playlists)&&void 0!==l?l:[];return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(n.A,{disabled:!e.available,onClick:u,children:V||(V=(0,h.jsx)(H.A,{}))}),(0,h.jsx)(N.A,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:s,open:!!s,onClose:c,PaperProps:{style:{maxHeight:216,width:"20ch"}},children:v.map(({id:e,name:t})=>(0,h.jsxs)(K.A,{sx:{dislay:"flex",justifyContent:"space-between"},onClick:()=>d(e),children:[t," ",X||(X=(0,h.jsx)(H.A,{}))]},e))})]})}var ee,et,el,er;function ea(e){let{track:t,index:l,onTogglePlay:r,onAddTrack:a,onDeleteTrack:s}=e;let{id:o,realId:i,name:u,artist:c,available:d,imageUrl:v}=t;let{accessToken:x}=(0,E.A)();let{trackStates:p}=(0,W.A)();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(B.Ay,{alignItems:"flex-start",sx:{background:d?"white":"#b0aeae"},children:[(0,h.jsx)(F.A,{children:(0,h.jsx)(D.A,{alt:u,src:null!=v?v:""})}),(0,h.jsx)(U.A,{primary:u,secondary:(0,h.jsx)(Z.A,{sx:{display:"inline"},component:"span",variant:"body2",color:"text.primary",children:c})}),null!=x&&null!=a?(0,h.jsx)(Y,{track:t,onUpdatePlaylist:a}):null,null!=x&&null!=s&&null!=o?(0,h.jsx)(n.A,{onClick:()=>s(o),children:ee||(ee=(0,h.jsx)(Q.A,{}))}):null,(0,h.jsx)(n.A,{disabled:!d,onClick:()=>r(l,i),children:p[i]?et||(et=(0,h.jsx)(J.A,{})):el||(el=(0,h.jsx)(R.A,{}))})]}),er||(er=(0,h.jsx)(_.A,{variant:"inset",component:"li"}))]})}var en;function es(e){let{tracks:t,count:l,pagination:i,search:u,onTogglePlay:c,onAddTrack:d,onDeleteTrack:v}=e;let x=(0,o.Zp)();return(0,h.jsxs)(a.A,{sx:{display:"flex",justifyContent:"center"},children:[(0,h.jsx)(n.A,{sx:{display:"flex",width:20,height:20,alignItems:"flex-start"},onClick:()=>x(-1),children:en||(en=(0,h.jsx)(r.A,{}))}),(0,h.jsxs)(s.A,{sx:{width:"100%",maxWidth:450},children:[(0,h.jsx)(z,{value:u.value,onChange:u.change}),t.map((e,t)=>(0,h.jsx)(ea,{track:e,index:t,onTogglePlay:c,onAddTrack:d,onDeleteTrack:v},t)),(0,h.jsx)(P,{pagination:i,totalCount:l})]})]})}},76016:(e,t,l)=>{l.d(t,{A:()=>a});var r=l(96540);function a({defaultOffset:e=0,limit:t}){let[l,a]=(0,r.useState)(e);let n=(0,r.useCallback)(e=>{null==a||a(e)},[]);let s=(0,r.useCallback)(()=>{a(e)},[e]);return(0,r.useMemo)(()=>({value:{offset:l,limit:t},change:n,reset:s}),[n,t,l,s])}},26608:(e,t,l)=>{l.d(t,{A:()=>a});var r=l(96540);function a(e){let{onChange:t}=null!=e?e:{};let[l,a]=(0,r.useState)("");let n=(0,r.useCallback)(e=>{null==t||t(),a(e)},[t]);let s=(0,r.useCallback)(()=>a(""),[]);return{value:l,change:n,reset:s}}},68175:(e,t,l)=>{l.r(t),l.d(t,{default:()=>v});var r=l(96540);var a=l(47767);var n=l(95697);var s=l(76016);var o=l(26608);var i=l(5328);var u=l(39222);var c=l(74848);var d;function v(){var e;let{playlistId:t=""}=(0,a.g)();let l=(0,s.A)({limit:50});let[v,x]=(0,r.useState)("");let p=(0,o.A)({onChange:()=>l.reset()});let{audioRef:h,setTracks:g,setTrackIndex:f,trackIndex:y,trackStates:j,setTrackState:A}=(0,n.A)();let{data:m,loading:b}=(0,u.$I)({variables:{query:{playlistId:t,pagination:l.value,search:p.value}}});let{tracks:k=[],count:w=0}=null!==(e=null==m?void 0:m.getTracksForGuest)&&void 0!==e?e:{};return b?d||(d=(0,c.jsx)("h1",{children:"Loading..."})):(0,c.jsx)(i.A,{tracks:k,count:w,pagination:l,search:p,onTogglePlay:(e,l)=>{if(y===e&&t===v){var r,a;j[l]?null==h||null===(r=h.current)||void 0===r||null===(r=r.audio.current)||void 0===r||r.pause():null==h||null===(a=h.current)||void 0===a||null===(a=a.audio.current)||void 0===a||a.play(),A(l,!j[l])}else x(t),g(k),f(e),A(l,!0)}})}}}]);