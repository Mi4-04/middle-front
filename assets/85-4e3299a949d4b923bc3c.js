"use strict";(self.webpackChunkmiddle_front=self.webpackChunkmiddle_front||[]).push([[85],{90982:(e,t,r)=>{r.d(t,{Bv:()=>c,D$:()=>u});var n=r(39708);var a=r(39181);var l=r(77969);let o;let i={};let s=(0,n.J1)(o||(o=(e=>e)`
    query GetPlaylists($realId: String) {
  getPlaylists(realId: $realId) {
    playlists {
      id
      name
      imageUrl
    }
  }
}
    `));function u(e){let t={...i,...e};return a.I(s,t)}function c(e){let t={...i,...e};return l._(s,t)}function d(e){let t={...i,...e};return Apollo.useSuspenseQuery(s,t)}},96610:(e,t,r)=>{r.d(t,{U:()=>s});var n=r(39708);var a=r(95420);let l;let o={};let i=(0,n.J1)(l||(l=(e=>e)`
    mutation UpdatePlaylist($input: UpdatePlaylistInput!) {
  updatePlaylist(input: $input) {
    status
  }
}
    `));function s(e){let t={...o,...e};return a.n(i,t)}},5328:(e,t,r)=>{r.d(t,{A:()=>eo});var n=r(11735);var a=r(97834);var l=r(11641);var o=r(49799);var i=r(47767);var s=r(96540);var u=r(34164);var c=r(47155);var d=r(85738);var v=r(49764);var p=r.n(v);var x=r(93409);var g=r(74848);var h;let f=(0,s.forwardRef)((e,t)=>(0,g.jsx)("svg",{width:7,height:13,viewBox:"0 0 7 13",stroke:"currentColor",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,...e,children:h||(h=(0,g.jsx)("path",{d:"M6.167 12 .833 6.667l5.334-5.334",strokeWidth:1.333,strokeLinecap:"round",strokeLinejoin:"round"}))}));var m;let j=(0,s.forwardRef)((e,t)=>(0,g.jsx)("svg",{width:3,height:14,viewBox:"0 0 3 14",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",ref:t,...e,children:m||(m=(0,g.jsx)("path",{d:"M3 12a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"}))}));let y=(0,d.Ay)(p()).withConfig({componentId:"sc-bqz3c0-0"})(["display:flex;justify-content:center;list-style-type:none;padding:0;margin:2rem 0 0;& a{user-select:none;width:36px;height:36px;background:",";box-shadow:7px 9px 30px ",";border-radius:50%;display:flex;justify-content:center;align-items:center;font-size:14px;cursor:pointer;color:",";margin:0 5px;}& > .selected > a{background:",";color:",";cursor:default;}& > .disabled > a{cursor:default;color:",";}& > :not(.selected):not(.disabled){&:hover > a{color:",";}&:active > a{color:",";}}&.no-arrows > .previous,&.no-arrows > .next{",";}"],x.c,(0,c.B3)(x.GA,.15),x.c3,x.yy,x.c,x.yy,x.yy,x._F,(0,c.Ic)());let A=(0,d.Ay)(f).withConfig({componentId:"sc-bqz3c0-1"})([""]);let b=(0,d.Ay)(f).withConfig({componentId:"sc-bqz3c0-2"})(["transform:rotate(180deg);"]);let C=(0,d.Ay)(j).withConfig({componentId:"sc-bqz3c0-3"})(["transform:rotate(90deg);"]);var w,k,I;function M(e){let{className:t,pagination:r,totalCount:n}=e;let{offset:a,limit:l}=r.value;let o=(0,s.useMemo)(()=>Math.ceil(a/l),[l,a]);let i=(0,s.useMemo)(()=>Math.ceil(n/l),[l,n]);let c=(0,s.useCallback)(({selected:e})=>{r.change(e*l)},[l,r]);return i<2?null:(0,g.jsx)(y,{className:(0,u.A)(t),marginPagesDisplayed:2,pageCount:i,forcePage:o,onPageChange:c,nextLabel:w||(w=(0,g.jsx)(b,{})),previousLabel:k||(k=(0,g.jsx)(A,{})),breakLabel:I||(I=(0,g.jsx)(C,{}))})}var P=r(68125);var L=r(17809);var S=r(52090);var E=r(25239);let B=d.I4.form.withConfig({componentId:"sc-dw44s3-0"})(["margin:0 0 20px 25px;"]);var T,$;function q(e){let{value:t="",onChange:r}=e;let[n,a]=(0,s.useState)(t);let[o,i]=(0,s.useState)(t);return t!==o&&(a(t),i(t)),(0,g.jsx)(B,{onSubmit:e=>{e.preventDefault(),null==r||r(n)},onBlur:e=>{e.currentTarget.contains(e.relatedTarget)||a(t)},children:(0,g.jsx)(S.A,{value:n,onChange:e=>a(e.target.value),InputProps:{startAdornment:T||(T=(0,g.jsx)(E.A,{position:"start",children:(0,g.jsx)(P.A,{})})),endAdornment:(0,g.jsx)(l.A,{onClick:()=>{null==r||r("")},children:$||($=(0,g.jsx)(L.A,{}))})},variant:"standard"})})}var z=r(12794);var D=r(1471);var R=r(18393);var U=r(82241);var Z=r(14073);var _=r(71543);var F=r(67110);var G=r(22859);var J=r(36694);var K=r(95697);var O=r(37414);var Q=r(99682);var W=r(3577);var H=r(18740);var N=r(90982);var V,X;function Y({track:e,onUpdatePlaylist:t}){var r;let[n,{data:a}]=(0,N.Bv)({variables:{realId:e.realId}});let[o,i]=(0,s.useState)(null);let u=async e=>{i(e.currentTarget),await n()};let c=()=>i(null);let d=r=>{t(e,r),c()};let v=null!==(r=null==a?void 0:a.getPlaylists.playlists)&&void 0!==r?r:[];return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(l.A,{disabled:!e.available,onClick:u,children:V||(V=(0,g.jsx)(Q.A,{}))}),(0,g.jsx)(W.A,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:o,open:!!o,onClose:c,PaperProps:{style:{maxHeight:216,width:"20ch"}},children:v.map(({id:e,name:t})=>(0,g.jsxs)(H.A,{sx:{dislay:"flex",justifyContent:"space-between"},onClick:()=>d(e),children:[t," ",X||(X=(0,g.jsx)(Q.A,{}))]},e))})]})}var ee,et,er,en;function ea(e){let{track:t,index:r,onTogglePlay:n,onAddTrack:a,onDeleteTrack:o}=e;let{id:i,realId:s,name:u,artist:c,available:d,imageUrl:v}=t;let{accessToken:p}=(0,O.A)();let{trackStates:x}=(0,K.A)();return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(z.Ay,{alignItems:"flex-start",sx:{background:d?"white":"#b0aeae"},children:[(0,g.jsx)(D.A,{children:(0,g.jsx)(R.A,{alt:u,src:null!=v?v:""})}),(0,g.jsx)(U.A,{primary:u,secondary:(0,g.jsx)(Z.A,{sx:{display:"inline"},component:"span",variant:"body2",color:"text.primary",children:c})}),null!=p&&null!=a?(0,g.jsx)(Y,{track:t,onUpdatePlaylist:a}):null,null!=p&&null!=o&&null!=i?(0,g.jsx)(l.A,{onClick:()=>o(i),children:ee||(ee=(0,g.jsx)(F.A,{}))}):null,(0,g.jsx)(l.A,{disabled:!d,onClick:()=>n(r,s),children:x[s]?et||(et=(0,g.jsx)(G.A,{})):er||(er=(0,g.jsx)(J.A,{}))})]}),en||(en=(0,g.jsx)(_.A,{variant:"inset",component:"li"}))]})}var el;function eo(e){let{tracks:t,count:r,pagination:s,search:u,onTogglePlay:c,onAddTrack:d,onDeleteTrack:v}=e;let p=(0,i.Zp)();return(0,g.jsxs)(a.A,{sx:{display:"flex",justifyContent:"center"},children:[(0,g.jsx)(l.A,{sx:{display:"flex",width:20,height:20,alignItems:"flex-start"},onClick:()=>p(-1),children:el||(el=(0,g.jsx)(n.A,{}))}),(0,g.jsxs)(o.A,{sx:{width:"100%",maxWidth:450},children:[(0,g.jsx)(q,{value:u.value,onChange:u.change}),t.map((e,t)=>(0,g.jsx)(ea,{track:e,index:t,onTogglePlay:c,onAddTrack:d,onDeleteTrack:v},t)),(0,g.jsx)(M,{pagination:s,totalCount:r})]})]})}},76016:(e,t,r)=>{r.d(t,{A:()=>a});var n=r(96540);function a({defaultOffset:e=0,limit:t}){let[r,a]=(0,n.useState)(e);let l=(0,n.useCallback)(e=>{null==a||a(e)},[]);let o=(0,n.useCallback)(()=>{a(e)},[e]);return(0,n.useMemo)(()=>({value:{offset:r,limit:t},change:l,reset:o}),[l,t,r,o])}},26608:(e,t,r)=>{r.d(t,{A:()=>a});var n=r(96540);function a(e){let{onChange:t}=null!=e?e:{};let[r,a]=(0,n.useState)("");let l=(0,n.useCallback)(e=>{null==t||t(),a(e)},[t]);let o=(0,n.useCallback)(()=>a(""),[]);return{value:r,change:l,reset:o}}},95420:(e,t,r)=>{r.d(t,{n:()=>c});var n=r(31635);var a=r(27243);var l=r(60144);var o=r(15381);var i=r(75443);var s=r(9211);var u=r(70111);function c(e,t){var r=(0,u.m)(null==t?void 0:t.client);(0,i.D$)(e,i.KG.Mutation);var c=a.useState({called:!1,loading:!1,client:r}),d=c[0],v=c[1];var p=a.useRef({result:d,mutationId:0,isMounted:!0,client:r,mutation:e,options:t});Object.assign(p.current,{client:r,options:t,mutation:e});var x=a.useCallback(function(e){void 0===e&&(e={});var t=p.current,r=t.options,a=t.mutation;var i=(0,n.Cl)((0,n.Cl)({},r),{mutation:a});var u=e.client||p.current.client;p.current.result.loading||i.ignoreResults||!p.current.isMounted||v(p.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:u});var c=++p.current.mutationId;var d=(0,l.l)(i,e);return u.mutate(d).then(function(t){var r,n;var a=t.data,l=t.errors;var i=l&&l.length>0?new s.K4({graphQLErrors:l}):void 0;var x=e.onError||(null===(r=p.current.options)||void 0===r?void 0:r.onError);if(i&&x&&x(i,d),c===p.current.mutationId&&!d.ignoreResults){var g={called:!0,loading:!1,data:a,error:i,client:u};p.current.isMounted&&!(0,o.L)(p.current.result,g)&&v(p.current.result=g)}var h=e.onCompleted||(null===(n=p.current.options)||void 0===n?void 0:n.onCompleted);return i||null==h||h(t.data,d),t}).catch(function(t){var r;if(c===p.current.mutationId&&p.current.isMounted){var n={loading:!1,error:t,data:void 0,called:!0,client:u};(0,o.L)(p.current.result,n)||v(p.current.result=n)}var a=e.onError||(null===(r=p.current.options)||void 0===r?void 0:r.onError);if(a)return a(t,d),{data:void 0,errors:t};throw t})},[]);var g=a.useCallback(function(){if(p.current.isMounted){var e={called:!1,loading:!1,client:r};Object.assign(p.current,{mutationId:0,result:e}),v(e)}},[]);return a.useEffect(function(){return p.current.isMounted=!0,function(){p.current.isMounted=!1}},[]),[x,(0,n.Cl)({reset:g},d)]}}}]);